{% extends "base.html" %}


{% block title %}
{{title}}
{% endblock %}


{% block content %}
<div class="contaier-fluid">
    <div class="row mx-2">
        <h2 class="text-center m-3">{{title}}</h2>
    </div>

    {% include 'comments/nodes/comment_view.html'%}

    <!-- nav paginator  -->
    <div class="text-center">
        {% if page.has_other_pages%}
            {% if page.has_previous %}
            <a href="?page={{page.previous_page_number}}"> &lt; </a>
            &nbsp; | &nbsp;
            {% endif %}

            <span>Part {{ page.number }} from {{ page.paginator.num_pages }}</span> 

            {% if page.has_next %}
            &nbsp; | &nbsp;
            <a href="?page={{page.next_page_number }}"> &gt; </a>
            {% endif %}
        {% endif %}
    </div>

    {% include 'comments/nodes/form_new_comment.html' %}

</div>


<script>

    function closeForm() {
        document.getElementById("newForm").remove();
    }

    function createReplyForm(id) {
        // clean old form on page  
        if (document.contains(document.getElementById("newForm"))) {
            document.getElementById("newForm").remove();
        }
        /* get <div class="back_white m-2" id="{{ node.id }}"> from 
        path comments/nodes/comment_view.html */
        var a = document.getElementById(id);
        // paste form in end of block-div
        a.insertAdjacentHTML('afterend',

            '<form id="newForm" class="form-insert" method="post"> \
                {% csrf_token %} \
            <table class="m-2">\
            <tbody><tr>\
            <th><label for="id_username">Username:</label></th>\
            <td><input type="text" name="username" size="24" class="m-2" maxlength="50" required="" id="id_username"></td> \
            </tr>\
            <tr>\
            <th><label for="id_email">Email:</label></th>\
            <td><input type="email" name="email" size="24" class="m-2" maxlength="254" required="" id="id_email"></td>\
            </tr>\
            <tr>\
            <th></th>\
            <td>\
            <select name="parent" class="d-none" id="id_parent">\
            <option value="' + id + '" selected="' + id + '"></option>\
            </select>\
            </td>\
            </tr>\
            <tr>\
            <th><label for="id_text">Text:</label></th>\
            <td><textarea name="text" cols="24" rows="4"  class="m-2" required="" id="id_text"></textarea></td>\
            </tr>\
            <tr>\
            <th><label for="id_url">Url:</label></th>\
            <td><input type="url" name="url" size="24" class="m-2" maxlength="200" id="id_url"></td>\
            </tr>\
            <tr><td></td>\
            <td> \
                <p class="d-flex justify-content-between m-2">\
                <button type="submit" class="btn btn-primary">Submit</button>\
                <button type="button" class="btn btn-outline-secondary" onclick="closeForm()">Close</button>\
            </p> \
            </td> \
            </tr>\
            </tbody>\
            </table>\
            </form>');
    }

    $("#myForm").trigger("reset")
</script>

{% endblock %}